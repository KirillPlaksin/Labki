#include <iostream>
#include<conio.h>
#include <math.h>
#include<cmath>
#include "gnuplot_i.hpp"
#define GNUPLOT_PATH "C:\\Users\\Kirill\\Documents\\Visual Studio 2013\\Projects\\bisekcja\\bisekcja\\gnuplot\\bin" 

using namespace std;

double f(double x){

	return x*x + 2 * x - 3;
}

double f2(double x){

	return (1 + cos(x)) / (3 - sin(x)) - 0.5;
}

double f3(double x){

	return (exp(x) - 2);
}

int main(){
	
	double a, b, c,
		eps;
	int w, licznik = 0;
	char end;
	end = 'n';
	while (end != 't'){

		cout <<"1 - Funkcja Wykladnicza"<< endl;
		cout<< "2 - Trygonometryczna"<< endl;
		cout<< "3 - Welomian "<< endl;

		cout << endl;
		cout << "Wybur funkcij: " << endl;
		cin >> w;
		cout<< "Podaj przedzial szukania min (a < b) "<< endl;
		cout << endl;
		switch (w){


		case 1:
			cout << "f(x) = x*x + 2 * x - 3 " << endl;
			cout << endl;
			cout << "Podaj a: " << endl;
			cin >> a;
			cout << "Podaj b: " << endl;
			cin >> b;
			cout << "Dokladnosc epsilon: " << endl;
			cin >> eps;
			licznik = 0;
			while ((b - a) > 2 * eps){
				c = (a + b) / 2;
				if (f(c) == 0){
					break;
				}
				if (f(a)*f(c) < 0){
					b = c;
				}
				else
					a = c;


				licznik++;
				cout << "X: " << c << endl;
			}
			break;
		case 2: 
			cout << "f(x) = (1 + cos(x)) / (3 - sin(x)) - 0.5 " << endl;
			cout << endl;
			cout << "Podaj a: " << endl;
			cin >> a;
			cout << "Podaj b: " << endl;
			cin >> b;
			cout << "Dokladnosc epsilon: " << endl;
			cin >> eps;
			licznik = 0;
			while ((b - a) > 2 * eps){
				c = (a + b) / 2;
				if (f2(c) == 0){
					break;
				}
				if (f2(a)*f2(c) < 0){
					b = c;
				}
				else
					a = c;

				cout << "X: " << c << endl;
				licznik++;

			}
			break;
		case 3:
			cout << "f(x) = (exp(x) - 2) " << endl;
			cout << endl;
			cout << "Podaj a: " << endl;
			cin >> a;
			cout << "Podaj b: " << endl;
			cin >> b;
			cout << "Dokladnosc epsilon: " << endl;
			cin >> eps;
			licznik = 0;
			while ((b - a) > 2 * eps){
				c = (a + b) / 2;
				if (f3(c) == 0){
					break;
				}
				if (f3(a)*f3(c) < 0){
					b = c;
				}
				else
					a = c;

				cout << "X: " << c << endl;
				licznik++;

			}
			break;
		}
		cout << "-----------------------------" << endl;
		cout << "x= " << c;
		cout << endl;
		cout << "Iloscz iteracij: " << licznik << endl;
		cout << endl;
		cout << "czy zakonczyc program? ";
		cin >> end;
	}
	_getch();
	return 0;
}
