#include <iostream>
using namespace std;

int main(){

	int n = 3;
	bool niewiadome;
	float pomoc;

	do{
		niewiadome = false;

		cout << "Podaj liczbe niewiadomych z zakresu 2 - 10: ";
		cin >> n;

		if (n < 2 || n > 10){
			cout << "Nieprawidlowa liczba niewiadomych!" << endl;
			niewiadome = true;
		}
	} while (niewiadome);

	//float uklad_rownan[n][n + 1];

	float uklad_rownan[3][4] = { 1, 2, 3, 14, 4, 3, -1, 7, 1, -1, 1, 2 };

	cout << "Podaj kolejne wspolczynniki i wyraz wolny:" << endl;

	for (int i = 0; i < n; i++){

		cout << "Rownanie " << i + 1 << ":" << endl;

		for (int j = 0; j <= n; j++){

			if (j < n){
				cout << "x" << j + 1 << ": ";
				cin >> uklad_rownan[i][j];
			}
			else{
				cout << "wyraz wolny: ";
				cin >> uklad_rownan[i][j];
			}
		}
	}


	// wypisywanie układu równań
	for (int k = 0; k < n; k++){
		for (int l = 0; l <= n; l++){
			if (l == n - 1){ cout << uklad_rownan[k][l] << "x" << l + 1 << " = "; }
			else if (l == n){ cout << uklad_rownan[k][l]; }
			else{ cout << uklad_rownan[k][l] << "x" << l + 1 << " + "; }
		}
		cout << endl;
	}

	//====================================================

	for (int i = 0; i < n; i++){
		pomoc = uklad_rownan[i][i];
		for (int j = 0; j < n + 1; j++){
			uklad_rownan[i][j] /= pomoc;
		}

		for (int k = 0; k < n; k++){
			pomoc = uklad_rownan[k][i];
			for (int l = 0; l <= n; l++){
				if (k != i){
					uklad_rownan[k][l] -= uklad_rownan[i][l] * pomoc;
				}
			}
		}
	}


	//wypisywanie wyników =================================
	for (int r = 0; r < n; r++){
		cout << "x" << r + 1 << " = " << uklad_rownan[r][n] << endl;
	}

	return 0;

}
